var de=de||{};de.condes=de.condes||{},de.condes.plugin=de.condes.plugin||{},de.condes.plugin.adc=de.condes.plugin.adc||{},function(e,t){"use strict";const n="body",r="de.condes.plugin.adc.actions.js",a="ClassicReport",i="InteractiveReport",o="InteractiveGrid",s="Tree",c="data-item-for-region",l=".t-fht-tbody .a-IRR-table tr",d=`${l}:nth-child(2)`,g="click",u="keydown",h="apexafterrefresh",f="apexaftercanceldialog",p="apexafterclosedialog",m="ui-dialog",b=".ui-dialog-content";e.actions=e.actions||{};var x=e.actions,v=[];const $=function(e,n){t.isArray(e)||e.search(/[\.#\u0020:\[\]]+/)>=0||(e=`#${e}`),e.match(/oj.*/)&&(e=t(`#${e}`).closest("div.apex-item-group").attr("id")),t(e).each(n)},R=function(e){const n=t(`#${e}`),r=`#report_table_${e}`,c=`#${e}_ir`,l=`#${e}_ig`,d=`#${e}_tree`,g=`#SR_${e}`;var u;return n.find(l).length>0?u=o:n.find(c).length>0?u=i:n.find(r).length>0?u=a:n.find(d).length>0?u=s:n.parent(g).length>0&&(u="Tab"),u};x.alignReportVerticalTop=function(n){$(n,(function(){var n=t(this).attr("id");e.renderer.alignReportVerticalTop(n)}))},x.bindConfirmation=function(n,r,a,i){var o=t(`#${n}`);o.length>0&&e.controller.bindConfirmationHandler(o,r,a,i)},x.bindUnsavedWarning=function(n,r,a){var i=t(`#${n}`);i.length>0&&e.controller.bindUnsavedConfirmationHandler(i,r,a)},x.cancelModalDialog=function(t,n){const r=function(e){void 0!==e&&""!=e?parent.$("#"+e).trigger(f):""==e?(e=parent.$(b).data(m).opener.attr("id"),parent.$(b).data(m).opener.trigger(f)):(e=parent.triggeringElement.id,parent.$("#"+e).trigger(f)),apex.debug.info("cancelModalDialog - triggeringElement:"+e),apex.navigation.dialog.cancel(!0)};n&&e.controller.hasUnsavedChanges()?apex.message.confirm(e.controller.getStandardMessage("CSM_CANCEL_HAS_CHANGES"),(function(e){e&&r(t)})):r(t)},x.closeModalDialog=function(t,n,r){const a=function(e,t){void 0!==e&&""!=e?parent.$("#"+e).trigger(p):void 0===e||""==e?(e=parent.$(b).data(m).opener.attr("id"),parent.$(b).data(m).opener.trigger(p)):(e=parent.triggeringElement.id,parent.$("#"+e).trigger(p)),apex.debug.info("closeModalDialog - triggeringElement:"+e),apex.navigation.dialog.close(!0,t)};r&&!e.controller.hasUnsavedChanges()?apex.message.alert(e.controller.getStandardMessage("CSM_CLOSE_WO_CHANGES"),(function(e,t){a(e,t)})):a(t,n)},x.confirmCommand=function(t,n){e.renderer.confirmRequest(t,(function(){x.executeCommand(n)}))},x.confirmRequest=function(t,n){e.renderer.confirmRequest(t,n)},x.executeCommand=function(t){var n,r={};if("string"==typeof t?n={command:t,additionalPageItems:[],monitorChanges:!1}:((n=t).additionalPageItems=n.additionalPageItems||[],n.monitorChanges=n.monitorChanges||!1),e.controller.setTriggeringElement("COMMAND","command",n),t.monitorChanges&&e.controller.hasUnsavedChanges()){var a=e.controller.getPageState();r.data=t,r.data.message=a.message,r.data.title=a.title,e.renderer.confirmRequest(r,e.controller.execute)}else e.controller.execute()},x.focus=function(e){t(`#${e}`).focus()},x.getReportSelection=function(n,f,p,m){const b=t(`#${n}`),v=R(n);let $,w;switch(f?($=function(e){apex.item(f).setValue(e)},t(`#${f}`).attr(c,n),e.controller.bindObserverItems(f)):$=function(t){e.controller.setTriggeringElement(n,"adcselectionchange",t),e.controller.execute()},v){case a:b.on(g,".t-Report-report tbody tr",(function(){w=t(this).find("td [data-id]").data("id"),e.renderer.highlightRow(t(this),m),$(w)}));break;case o:b.on("interactivegridselectionchange",(function(e,t){t.selectedRecords.length&&(w=p?t.selectedRecords[0][Math.max(p-1,0)]:t.model.getRecordId(t.selectedRecords[0]),$(w))}));break;case i:b.on(g,".a-IRR-table tr:not(:first-child)",(function(){w=t(this).find("td [data-id]").data("id"),x.selectEntry(n,w,!0,!1),$(w)})).on(u,l,(function(e){if(9===e.which&&!1===e.shiftKey){if(t(this).next().click(),!t(this).is(":last-child"))return!1;apex.debug.info(`${r} - tab key from last row leaves IR`)}else if(9===e.which&&!0===e.shiftKey){if(t(this).prev().click(),!t(this).is(":nth-child(2)"))return!1;apex.debug.info(`${r} - tab key backwards from first row leaves IR`)}})).on(u,".t-fht-thead .a-IRR-table th.a-IRR-header a:last",(function(e){if(apex.debug.info(`${r} - tab key from last header row enters IR`),9===e.which&&!1===e.shiftKey)return t(d).click(),!1})).on(h,(function(e){apex.debug.log(`${r} - apexafterrefresh detected`),f&&apex.item(f).setValue(),x.selectEntry(n,"",m,!1)}));break;case s:let c=t(`#${n}_tree`);c.on("treeviewselectionchange",(function(){let e,t;e=c.treeView("getSelectedNodes"),t=e.map((function(e){return e.id})).join(":"),$(t)}))}x.selectEntry(n,"",m,!0)},x.hideReportFilterPanel=function(n){$(n,(function(){var n=t(this).attr("id");e.renderer.hideReportFilterPanel(n,R(n))}))},x.notify=function(t,n,r,a){e.renderer.showDialog(t,n,r,a)},x.clearErrors=function(){e.renderer.showErrors([])},x.confirm=function(t,n,r){e.renderer.showDialog(t,n,r,!0)},x.showSuccess=function(t){e.renderer.showSuccess(t)},x.showMessage=function(t,n,r){switch(r.dialogType){case"dialog":e.renderer.showMessage(t,n,r);break;case"success":e.renderer.showSuccess(t)}},x.hideMessage=function(t){switch(t){case"success":e.renderer.clearNotification();break;case"error":e.renderer.clearErrors();break;case"both":e.renderer.clearNotification(),e.renderer.clearErrors()}},x.registerPageItemsOnce=function(t){e.controller.setAdditionalItems(t)},x.rememberPageItemStatus=function(n,r,a){var i,o,s;(s=e.controller.getPageState()).itemMap.clear(),s.message=r,s.title=a,i=t(":input:visible:not(button)"),Array.isArray(n)&&n.count>0&&(i=n),t.each(i,(function(e){(e=i[e]).id&&(e=e.id),o=apex.item(e).getValue(),s.itemMap.set(e,o),apex.debug.info(`Saving ${e} with value ${o}`)})),e.controller.setPageState(s)},x.refresh=function(n,r){t(`div#${n}.js-apex-region`).length>0?(r&&t(`#${n}`).one(h,(function(e){x.selectEntry(n,r,!0)})),apex.region(n).refresh()):(e.controller.pauseChangeEventDuringRefresh(n,r),apex.item(n).show(),apex.item(n).enable(),apex.item(n).refresh())},x.refreshAndSetValue=function(t,n){var r=n||apex.item(t).getValue()||e.controller.findItemValue(t);e.controller.pauseChangeEventDuringRefresh(t,r),apex.item(t).show(),apex.item(t).enable(),apex.item(t).refresh()},x.selectEntry=function(n,r,l,d){let g,u;const h=`#report_table_${n}`,f=`#${n}_ir`,p=`#${n}_ig`,m=`#${n}_tree`,b=t(`input[${c}=${n}]`);void 0!==r&&""!=r||b.length>0&&(r=apex.item(b.attr("id")).getValue());const x=` span[data-id='${r}']`;switch(R(n)){case a:u=""==r?t(h+" > tbody > tr:nth-child(1)"):t(h+x).parent("td").parent("tr"),e.renderer.highlightRow(u,l);break;case o:g=t(p),""==r&&(r=g.find("tbody tr").data("id")),u=g.interactiveGrid("getViews","grid").model.getRecord(r),u&&g.interactiveGrid("setSelectedRecords",u,l,d);break;case i:""==r?(u=t(f+" .a-IRR-table tbody tr:nth-child(2)"),b.length>0&&(r=u.find("[data-id]").data("id"),apex.item(b.attr("id")).setValue(r))):u=t(f+x).parent("td").parent("tr"),e.renderer.highlightRow(u,l);break;case s:g=t(m),u=g.treeView("find",{depth:-1,match:function(e){return e.id===r}}),g.treeView("collapseAll"),g.treeView("expand",u),g.treeView("setSelection",u,l,d)}},x.setApexActionAccessKey=function(e){const n="t-Button-label";var r,a,i=a.find(`.${n}`),o=i.html(),s=r.exec(o),c=t(`[data-action='${e}']`),l=apex.actions.lookup(e).shortcut;""!==l&&(l=l.slice(-1)),l.length>0&&(r=new RegExp(l,"i"),c.each((function(){(a=t(this)).find(`.${n}`)[0]||a.html(`<span class='${n}'>${a.html()}>span>`),i.html(o.replace(r,`<span class='accesskey'>${s}>span>`)),a.attr("accesskey",s),a.attr("data-accesskey",o.search(r))})))},x.setDisplayState=function(r,a,i){$(r,(function(){var r=t(this).attr("id");switch(a){case"HIDE":apex.item(r).hide();break;case"SHOW_DISABLE":apex.item(r).show(),e.renderer.disableElement(r),t(n).clearQueue();break;case"SHOW_ENABLE":apex.item(r).show(),e.renderer.enableElement(r);break;default:apex.debug.info(`Visual State ${a} not supported`)}i&&e.renderer.setItemLabel(r,i)}))},x.setErrors=function(r){if(r){r.errors.length>0&&t(n).clearQueue(),t.each(r.firingItems,(function(e,n){v=t.grep(v,(function(e){return e.pageItem!=n&&"DOCUMENT"!=e.pageItem}))}));for(let e=0;e<r.errors.length;e++){const t=r.errors[e];v.push(t)}}else v=[];e.renderer.showErrors(v)},x.setItemValue=function(e,n){$(e,(function(){var e=t(this).attr("id");apex.item(e).setValue(n,n,!0)}))},x.setItemValues=function(n){e.controller.setLastItemValues(n),t.each(n,(function(){(this.value||"FOO")!==(apex.item(this.id).getValue()||"FOO")&&(apex.item(this.id).setValue(this.value,this.value,!0),apex.debug.info(`Item '${this.id}' set to '${this.value}'`))}))},x.setMandatory=function(n,r){$(n,(function(){var n=t(this).attr("id").replace("_CONTAINER","");r&&e.controller.pushPageItem(n),e.renderer.enableElement(n),e.renderer.setItemMandatory(n,r)}))},x.setModalDialogTitle=function(t){e.renderer.setModalDialogTitle(t)},x.setRegionContent=function(t,n){e.renderer.setRegionContent(t,n)},x.setRegionHeader=function(t,n){e.renderer.setRegionHeader(t,n,R(t))},x.selectTab=function(e,t){apex.region(e).widget().aTabs("getTabs")[`#${t}`].makeActive()},x.showWaitSpinner=function(t){e.renderer.showWaitSpinner(t)},x.submit=function(t,n){e.renderer.submitPage(t,n)}}(de.condes.plugin.adc,apex.jQuery);