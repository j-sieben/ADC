<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>adc_ui_designer.pkb</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css" /><script type="text/javascript" src="../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="ADC_UI_DESIGNER_Body"></a><a name="Topic74"></a><div class="CTopic TClass LSQL first">
 <div class="CTitle">ADC_UI_DESIGNER&nbsp; Body</div>
 <div class="CBody"><p>Implementation of the GUI logic of the ADC APEX applications ADC Designer</p><div class="CHeading">Author</div><p>Juergen Sieben, ConDeS GmbH</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Private_package_constants"></a><a name="Topic75"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Private package constants</div>
</div>

<a name="ADC_UI_DESIGNER_Body.Mode_and_Action_constants"></a><a name="Topic76"></a><div class="CTopic TConstant LSQL">
 <div class="CTitle">Mode and Action constants</div>
 <div class="CBody"><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_CGR"></a><a name="Topic77"></a>C_MODE_CGR</td><td class="CDLDefinition"><p>Hierarchical level Rule Group</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_CRU"></a><a name="Topic78"></a>C_MODE_CRU</td><td class="CDLDefinition"><p>Hierarchical level Rule</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_CRA"></a><a name="Topic79"></a>C_MODE_CRA</td><td class="CDLDefinition"><p>Hierarchical level Rule Action</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_CAG"></a><a name="Topic80"></a>C_MODE_CAG</td><td class="CDLDefinition"><p>Hierarchical level APEX Action Group (used as a hierarchy level only to group APEX Actions)</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_CAA"></a><a name="Topic81"></a>C_MODE_CAA</td><td class="CDLDefinition"><p>Hierarchical level APEX Action</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_FLG"></a><a name="Topic82"></a>C_MODE_FLG</td><td class="CDLDefinition"><p>Hierarchical level Workflow Group (used as a hierarchy level only to group Flows, if flows if installed)</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_MODE_FLS"></a><a name="Topic83"></a>C_MODE_FLS</td><td class="CDLDefinition"><p>Hierarchical level Workflows (if flows is installed only)</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ACTION_CANCEL"></a><a name="Topic84"></a>C_ACTION_CANCEL</td><td class="CDLDefinition"><p>APEX Action to cancel an operation</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ACTION_CREATE"></a><a name="Topic85"></a>C_ACTION_CREATE</td><td class="CDLDefinition"><p>APEX Action to create a record</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ACTION_DELETE"></a><a name="Topic86"></a>C_ACTION_DELETE</td><td class="CDLDefinition"><p>APEX Action to delete a record</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ACTION_UPDATE"></a><a name="Topic87"></a>C_ACTION_UPDATE</td><td class="CDLDefinition"><p>APEX Action to update a record</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_EXPORT_CGR"></a><a name="Topic88"></a>C_EXPORT_CGR</td><td class="CDLDefinition"><p>APEX Action to export a rule group</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Item_and_Region_constants"></a><a name="Topic89"></a><div class="CTopic TConstant LSQL">
 <div class="CTitle">Item and Region constants</div>
 <div class="CBody"><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ITEM_CGR_APP_ID"></a><a name="Topic90"></a>C_ITEM_CGR_APP_ID</td><td class="CDLDefinition"><p>Item that contains the Application ID</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ITEM_CGR_ID"></a><a name="Topic91"></a>C_ITEM_CGR_ID</td><td class="CDLDefinition"><p>Item that contains the Rule Group ID</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ITEM_CRU_ID"></a><a name="Topic92"></a>C_ITEM_CRU_ID</td><td class="CDLDefinition"><p>Item that contains the Rule ID</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ITEM_CRA_ID"></a><a name="Topic93"></a>C_ITEM_CRA_ID</td><td class="CDLDefinition"><p>Item that contains the Rule Action ID</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ITEM_CAA_ID"></a><a name="Topic94"></a>C_ITEM_CAA_ID</td><td class="CDLDefinition"><p>Item that contains the APEX Action ID</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_ITEM_CRA_CAT_ID"></a><a name="Topic95"></a>C_ITEM_CRA_CAT_ID</td><td class="CDLDefinition"><p>Item that contains the Action Type</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_RULES"></a><a name="Topic96"></a>C_REGION_RULES</td><td class="CDLDefinition"><p>Static ID of the Rule report region</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_HIERARCHY"></a><a name="Topic97"></a>C_REGION_HIERARCHY</td><td class="CDLDefinition"><p>Static ID of the Hierarchy Tree region</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_HELP"></a><a name="Topic98"></a>C_REGION_HELP</td><td class="CDLDefinition"><p>Static ID of the Help region</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_CGR_FORM"></a><a name="Topic99"></a>C_REGION_CGR_FORM</td><td class="CDLDefinition"><p>Static ID of the Rule Group form region</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_CRU_FORM"></a><a name="Topic100"></a>C_REGION_CRU_FORM</td><td class="CDLDefinition"><p>Static ID of the Rule form region</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_CRA_FORM"></a><a name="Topic101"></a>C_REGION_CRA_FORM</td><td class="CDLDefinition"><p>Static ID of the Rule Action form region</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.C_REGION_CAA_FORM"></a><a name="Topic102"></a>C_REGION_CAA_FORM</td><td class="CDLDefinition"><p>Static ID of the APEX Action form region</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Type_definitions"></a><a name="Topic103"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Type definitions</div>
</div>

<a name="ADC_UI_DESIGNER_Body.environment_rec"></a><a name="Topic104"></a><div class="CTopic TType LSQL">
 <div class="CTitle">environment_rec</div>
 <div class="CBody"><p>Record to hold information about the actual state of the ADC designer</p><div class="CHeading">Properties</div><table class="CDefinitionList"><tr><td class="CDLEntry">selected_node</td><td class="CDLDefinition"><p>ID value of the selected node from the hierarchy. Combination of target_mode and node_id</p></td></tr><tr><td class="CDLEntry">target_mode</td><td class="CDLDefinition"><p>Type of the node (CGR, CRU, CRA or CAA and others) that controls what form is displayed if the APEX Action is invoked</p></td></tr><tr><td class="CDLEntry">action_mode</td><td class="CDLDefinition"><p>Type of the node (CGR, CRU, CRA or CAA and others) that controls on what form the actual APEX Action is to be performed. If fi <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.C_ACTION_DELETE" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,86);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >C_ACTION_DELETE</a> is invoked, the delete must be processed for mode identified by this attribute. If this is done, target_mode controls which form to display next.</p></td></tr><tr><td class="CDLEntry">node_id</td><td class="CDLDefinition"><p>ID of the selected node as used in the data model. Normally, the ID is taken based on the mode.&nbsp; It is possible though that not all modes have a correlated ID, fi the APEX Action group (CAG) which will reference the Rule Group (CGR) ID instead.</p></td></tr><tr><td class="CDLEntry">form_id</td><td class="CDLDefinition"><p>Static ID of the actually selected form</p></td></tr><tr><td class="CDLEntry">cgr_id</td><td class="CDLDefinition"><p>ID of the rule group the selecte node belongs to</p></td></tr><tr><td class="CDLEntry">action</td><td class="CDLDefinition"><p>Name of the APEX action that triggered the event</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.form_item_list_tab"></a><a name="Topic105"></a><div class="CTopic TType LSQL">
 <div class="CTitle">form_item_list_tab</div>
 <div class="CBody"><p>List of page items required by a given mode.</p><p>The list of page items required for a given form is collected upon package initialization based on the APEX meta data and the form region's static ID.</p><p>These item lists are required for the ADC designer to</p><ul><li><p>control which items to pass back to the database if a DML process is requested</p></li><li><p>control which items to monitor for changes. If on of these items changes and a respective APEX Action is invoked, a warn message is displayed to prevent this data from being overwritten.</p></li></ul></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Private_package_variables"></a><a name="Topic106"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Private package variables</div>
</div>

<a name="ADC_UI_DESIGNER_Body.State_variables"></a><a name="Topic107"></a><div class="CTopic TVariable LSQL">
 <div class="CTitle">State variables</div>
 <div class="CBody"><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.g_environment"></a><a name="Topic108"></a>g_environment</td><td class="CDLDefinition"><p>Variable of type <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.environment_rec" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,104);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >environment_rec</a> to hold all relevant attributes of the actual designer state.</p></td></tr><tr><td class="CDLEntry"><a name="ADC_UI_DESIGNER_Body.g_page_values"></a><a name="Topic109"></a>g_page_values</td><td class="CDLDefinition"><p>PL/SQL table to hold key value pairs for page items (key) and their values</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Copy_Session_State_methods"></a><a name="Topic110"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Copy Session State methods</div>
</div>

<a name="ADC_UI_DESIGNER_Body.copy_..."></a><a name="Topic111"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">copy_...</div>
 <div class="CBody"><p>Helper to copy APEX session state values into type safe record structures</p><p>Is called to copy the actual session state values entered into a type safe record structure.&nbsp; Type casting is auto detected if APEX has knowledge of the type, fi by using a form region or editable interactive grid. If this is not present, it tries to detect the type basyed on a format mask assigned to the item.</p><div class="CHeading">Attention</div><p>Please note that the use of a form region or an editable interactive grid requires the mandatory identification with a static ID so that the method can uniquely identify the region.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Private_Methods"></a><a name="Topic112"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Private Methods</div>
</div>

<a name="ADC_UI_DESIGNER_Body.assemble_action"></a><a name="Topic113"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">assemble_action</div>
 <div id="NDPrototype113" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> assemble_action(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_action&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../../index.html#File:core/packages/adc_util.pks:ADC_UTIL.ora_name_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,417);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >adc_util.ora_name_type</a>,</td></tr><tr><td class="PName first">p_row&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_bl_designer_action_v<span class="SHKeyword">%rowtype</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">varchar2</span></div></div>
 <div class="CBody"><p>Method to calculate the action attribute of an APEX Action based on the action name, the node type and its ID.</p><p>APEX Actions <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.C_ACTION_CREATE" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,85);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >C_ACTION_CREATE</a>, <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.C_ACTION_UPDATE" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,87);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >C_ACTION_UPDATE</a> processing user input forms require a list of page items to work with.&nbsp; This list is evaluated on package initialization at method <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.initialize" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,130);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >initialize</a> and integrated into the action's event data attribute as required.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_action<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../../index.html#File:core/packages/adc_util.pks:ADC_UTIL.ora_name_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,417);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >adc_util.ora_name_type</a></div></td><td class="CDLDefinition"><p>ID of the APEX Action to set the action for</p></td></tr><tr><td class="CDLEntry">p_row<div class="CDLParameterType"><span class="SHKeyword">in</span> adc_bl_designer_action_v<span class="SHKeyword">%rowtype</span></div></td><td class="CDLDefinition"><p>the selected row of the decision table with all relevant information for the APEX Action</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.assemble_action.C_ACTION_TEMPLATE"></a><a name="Topic114"></a><div class="CTopic TConstant LSQL">
 <div class="CTitle"><span class="Qualifier">assemble_action.</span>&#8203;C_ACTION_TEMPLATE</div>
 <div class="CBody"><p>Method private code template for the action attribute.</p><p>The template holds relevant information that is accessible by the package upon action execution via the <a href="../../../index.html#File:core/packages/adc_api.pks:ADC_API.get_event_data" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,460);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_API.get_event_data</a> method. It's structure is as follows:</p><pre class="CCode">de.condes.plugin.adc.executeCommand({<br />  <span class="SHString">&quot;command&quot;</span>:<span class="SHString">&quot;Name of the APEX action&quot;</span>,<br />  <span class="SHString">&quot;targetMode&quot;</span>:<span class="SHString">&quot;Mode to which the code traverses if the action is executed&quot;</span>,<br />  <span class="SHString">&quot;actionMode&quot;</span>:<span class="SHString">&quot;Mode to which APEX action refers to&quot;</span>,<br />  <span class="SHString">&quot;id&quot;</span>:<span class="SHString">&quot;ID of the target mode entry&quot;</span>,<br />  <span class="SHString">&quot;additionalPageItems&quot;</span>: [Array of page items which are required during processing],<br />  <span class="SHString">&quot;monitorChanges&quot;</span>:Flag to indicate whether it is required to check <span class="SHKeyword">for</span> changes prior to invoking the action});</pre></div>
</div>

<a name="ADC_UI_DESIGNER_Body.get_cra_sort_seq"></a><a name="Topic115"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">get_cra_sort_seq</div>
 <div id="NDPrototype115" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> get_cra_sort_seq(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_cru_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_rules.cru_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">number</span></div></div>
 <div class="CBody"><p>Calculates the next Rule Action sort sequence for a given Rule ID.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.get_cru_sort_seq"></a><a name="Topic116"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">get_cru_sort_seq</div>
 <div id="NDPrototype116" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> get_cru_sort_seq(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_cgr_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_rule_groups.cgr_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">number</span></div></div>
 <div class="CBody"><p>Calculates the next Rule sort sequence for a given Rule Group ID.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.get_first_cgr_for_app"></a><a name="Topic117"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">get_first_cgr_for_app</div>
 <div id="NDPrototype117" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">function</span> get_first_cgr_for_app</div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> adc_rule_groups.cgr_id<span class="SHKeyword">%type</span></div></div>
 <div class="CBody"><p>Method retrieves the CGR_ID for the first page that is maintained by ADC</p><p>Returns: CGR_ID of the first ADC maintained page, ordered by page number.&nbsp; If no page exists or no application selected, NULL is returned.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.maintain_actions"></a><a name="Topic118"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">maintain_actions</div>
 <div id="NDPrototype118" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> maintain_actions(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_row&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_bl_designer_action_v<span class="SHKeyword">%rowtype</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method to calculate the visible status and action parameter of the APEX Actions.</p><p>Based on the type and mode of the APEX Action called, this methods calculates the correct visible status, the label and the action properties of the APEX Actions.</p><p>The decision is based on the outcome of the decision table query in <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.handle_activity" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,133);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >handle_activity</a>.&nbsp; The attributes of the selected row control the outcome of this method.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.process_page"></a><a name="Topic119"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">process_page</div>
 <div id="NDPrototype119" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> process_page</div></div>
 <div class="CBody"><p>Method to process the user input and persist the data at the database.</p><p>Based on the mode of the APEX Action (such as CGR, CRU etc.) the method calls the respective XAPI methods implemented in package <a href="../../../index.html#File:core/packages/adc_admin.pks:ADC_ADMIN" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,321);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_ADMIN</a>. It also decides upon the method to call based on the command passed in.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.set_id_values"></a><a name="Topic120"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_id_values</div>
 <div id="NDPrototype120" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> set_id_values</div></div>
 <div class="CBody"><p>Maintains the session state of CGR_ID and others based on the environment.</p><p>IDs can change as a consequence of two use cases only:</p><ul><li><p>A row in the hierarchy or the rule report is selected</p></li><li><p>A new tupel is generated.</p></li></ul><p>This method deals with the first use case. In this use case, the ID of the selected node is passed in in the form &lt;mode&gt;_&lt;id&gt;, fi CRA_1234 for a Rule Action.&nbsp; This method performs two tasks with this information:</p><ul><li><p>It sets the ID of page item CRA_ID to the value 1234</p></li><li><p>It retrieves the related CGR_ID and compares it to the actually set CGR_ID.&nbsp; Should they differ, the new CGR_ID is set and a refresh of the Rule Report is requested.</p></li></ul><p>If a new tupel is created, the ID is set there after succesful creation.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.read_environment"></a><a name="Topic121"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">read_environment</div>
 <div id="NDPrototype121" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> read_environment</div></div>
 <div class="CBody"><p>Method to retrieve the actual state of the ADC designer.</p><p>This procedure analyses the data attribute of the APEX Action invoked by the user.&nbsp; Based on this information, respective values are copied into <a href="../../../index.html#File:apex/packages/adc_ui_designer.pkb:ADC_UI_DESIGNER_Body.g_environment" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,108);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >g_environment</a>.</p><p>A second use case is that this method is called based on a selection of a row in the hierarchy tree or rule report. In this case, the data attribute only contains the ID of the selected row, which is composed of the mode and the id of the respective tupel. A selected Rule will therefore pass in something like CRU_123.</p><p>Based on this information, the required attributes are filled:</p><ul><li><p>action and target mode,</p></li><li><p>id of the active entry</p></li><li><p>static ID of the form to show</p></li><li><p>CGR_ID of the rule group containing the selected entry.</p></li></ul><p>If the CGR_ID has changed, this method also emits JavaScript code to refresh the rule report region.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.set_cat_help_text"></a><a name="Topic122"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_cat_help_text</div>
 <div id="NDPrototype122" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> set_cat_help_text(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_cat_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_action_types.cat_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method to calculate the help text for the selected hierarchy entry</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_cat_id<div class="CDLParameterType"><span class="SHKeyword">in</span> adc_action_types.cat_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>ID of the ADC Action Type to set the help text for</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.set_cra_param_settings"></a><a name="Topic123"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_cra_param_settings</div>
 <div id="NDPrototype123" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> set_cra_param_settings(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_cra_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_rule_actions.cra_id<span class="SHKeyword">%type</span>,</td></tr><tr><td class="PName first">p_cat_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_action_types.cat_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method to adjust the visibility, type and content of the parameters depending on the action type.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_cra_id<div class="CDLParameterType"><span class="SHKeyword">in</span> adc_rule_actions.cra_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>ID of the Rule Action</p></td></tr><tr><td class="CDLEntry">p_cat_id<div class="CDLParameterType"><span class="SHKeyword">in</span> adc_action_types.cat_id<span class="SHKeyword">%type</span></div></td><td class="CDLDefinition"><p>Type of the Rule Action</p></td></tr></table></div>
</div>

<a name="ADC_UI_DESIGNER_Body.show_form_caa"></a><a name="Topic124"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">show_form_caa</div>
 <div id="NDPrototype124" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> show_form_caa</div></div>
 <div class="CBody"><p>Method to show and populate a ADC Apex Action form of the designer and populate it with the values selected.</p><p>Two modes:</p><ul><li><p>APEX Action already exists. Initialize form based on stored values</p></li><li><p>APEX Action is created. Initialize form with default values</p></li></ul></div>
</div>

<a name="ADC_UI_DESIGNER_Body.show_form_cgr"></a><a name="Topic125"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">show_form_cgr</div>
 <div id="NDPrototype125" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> show_form_cgr</div></div>
 <div class="CBody"><p>Method to show and populate an ADC Rule Group form of the designer and populate it with the values selected.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.show_form_cra"></a><a name="Topic126"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">show_form_cra</div>
 <div id="NDPrototype126" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> show_form_cra</div></div>
 <div class="CBody"><p>Method to show and populate a ADC Rule Action form of the designer and populate it with the values selected.</p><p>The method distinguishes between different scenarios:</p><ul><li><p>Show an already existing Rule Action</p></li><li><p>Create a new Rule Action</p></li><li><p>Update an already visible Rule Action after changing its action type</p></li></ul><p>Based on this decision, the form is populated with the existing data or with a set of default data required for this method.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.show_form_cru"></a><a name="Topic127"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">show_form_cru</div>
 <div id="NDPrototype127" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> show_form_cru</div></div>
 <div class="CBody"><p>Method to show and populate a ADC Rule form of the designer and populate it with the values selected.</p><p>Two modes:</p><ul><li><p>Rule already exists. Initialize form based on stored values</p></li><li><p>Rule is created. Initialize form with default values</p></li></ul></div>
</div>

<a name="ADC_UI_DESIGNER_Body.show_form_fls"></a><a name="Topic128"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">show_form_fls</div>
 <div id="NDPrototype128" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> show_form_fls</div></div>
 <div class="CBody"><p>Method to show and populate a workflow form of the designer and populate it with the values selected.</p><p>This form is rendered only if FLOWS is installed and flag &lt;ADC_UTIL.C_WITH_FLOWS&gt; is set to TRUE.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.validate_page"></a><a name="Topic129"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">validate_page</div>
 <div id="NDPrototype129" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> validate_page</div></div>
 <div class="CBody"><p>Method to validate the user input against the business rules for the different designer areas.</p><p>Based on the mode of the APEX Action (see &lt;C_MODE_CREATE&gt; etc.) a decision is taken whether</p><ul><li><p>a validation method is required</p></li><li><p>which validation method to call.</p></li></ul><p>Validation methods are implemented in package <a href="../../../index.html#File:core/packages/adc_admin.pks:ADC_ADMIN" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,321);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_ADMIN</a> and throw errors. If an error is thrown, this will prevent further execution of the page.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.initialize"></a><a name="Topic130"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">initialize</div>
 <div id="NDPrototype130" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> initialize</div></div>
 <div class="CBody"><p>Method to initialize the ADC_UI package</p><p>Initially collects the name of all ADC Desginer page items per form region and persists them in an internal data structure for convenient access when working with the page designer.</p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.Public_Methods"></a><a name="Topic131"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Public Methods</div>
</div>

<a name="ADC_UI_DESIGNER_Body.get_lov_sql"></a><a name="Topic132"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">get_lov_sql</div>
 <div id="NDPrototype132" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> get_lov_sql(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_cpt_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_action_param_types.cpt_id<span class="SHKeyword">%type</span>,</td></tr><tr><td class="PName first">p_cgr_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> adc_rule_groups.cgr_id<span class="SHKeyword">%type</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">varchar2</span></div></div>
 <div class="CBody"><p>See <a href="../../../index.html#File:apex/packages/adc_ui_designer.pks:ADC_UI_DESIGNER.get_lov_sql" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,3);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_UI_DESIGNER.get_lov_sql</a></p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.handle_activity"></a><a name="Topic133"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">handle_activity</div>
 <div id="NDPrototype133" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> handle_activity</div></div>
 <div class="CBody"><p>See <a href="../../../index.html#File:apex/packages/adc_ui_designer.pks:ADC_UI_DESIGNER.handle_activity" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,4);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_UI_DESIGNER.handle_activity</a></p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.hanlde_cat_changed"></a><a name="Topic134"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">hanlde_cat_changed</div>
 <div class="CBody"><p>See <a href="../../../index.html#File:apex/packages/adc_ui_designer.pks:ADC_UI_DESIGNER.handle_cat_changed" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,5);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_UI_DESIGNER.handle_cat_changed</a></p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.toggle_cgr_active"></a><a name="Topic135"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">toggle_cgr_active</div>
 <div id="NDPrototype135" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> toggle_cgr_active</div></div>
 <div class="CBody"><p>See <a href="../../../index.html#File:apex/packages/adc_ui_designer.pks:ADC_UI_DESIGNER.toggle_cgr_active" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,6);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_UI_DESIGNER.toggle_cgr_active</a></p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.validate_rule_condition"></a><a name="Topic136"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">validate_rule_condition</div>
 <div id="NDPrototype136" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> validate_rule_condition</div></div>
 <div class="CBody"><p>See <a href="../../../index.html#File:apex/packages/adc_ui_designer.pks:ADC_UI_DESIGNER.validate_rule_condition" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,7);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_UI_DESIGNER.validate_rule_condition</a></p></div>
</div>

<a name="ADC_UI_DESIGNER_Body.support_flows"></a><a name="Topic137"></a><div class="CTopic TFunction LSQL last">
 <div class="CTitle">support_flows</div>
 <div id="NDPrototype137" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">function</span> support_flows</div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <a href="../../../index.html#File:core/packages/adc_util.pks:ADC_UTIL.flag_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,420);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >adc_util.flag_type</a></div></div>
 <div class="CBody"><p>See <a href="../../../index.html#File:apex/packages/adc_ui_designer.pks:ADC_UI_DESIGNER.support_flows" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,8);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ADC_UI_DESIGNER.support_flows</a></p></div>
</div>

</body></html>